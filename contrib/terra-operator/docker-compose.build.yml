version: '3.8'

services:
   core:
     image: classic-terra/core
     build:
      context: ../../
      dockerfile: Dockerfile
      platforms:
        - "linux/amd64"
      labels:
        - "classic-terra/core description=Contains the terrad binary"
   node:
     image: classic-terra/node
     build: 
      context: .
      dockerfile: Dockerfile
      args:
        base_image: classic-terra/core
      platforms:
        - "linux/amd64"
      labels:
        - "classic-terra/node description=Contains everything to run a full node"